- current = current_page?(slug_entry_path(feed, entry)) || current_page?(slug_entry_path(feed, 'current'))
.entry
  - if @prev_entry or @next_entry
    .pull-left.prev
      - @prev_page = @prev_entry ? slug_entry_path(feed, @prev_entry) : '#'
      = link_to @prev_page, class: 'btn btn-large' + (@prev_entry ? '' : ' disabled') do
        %i.icon-arrow-left
        Prev
        
    .pull-right.next
      - next_page = @next_entry ? slug_entry_path(feed, @next_entry) : '#'
      = link_to next_page, class: 'btn btn-large' + (@next_entry ? '' : ' disabled') do
        Next
        %i.icon-arrow-right
  .title
    - if current
      = entry.event_at.strftime('%Y-%m-%d %H:%M %Z')
      = "(JD#{entry.event_at.yday})"
      .contents
        = render :partial => entry.category, :locals => { :feed => feed, :entry => entry }
    - elsif current_page?(root_path)
      = link_to slug_path(feed) do
        = entry.event_at.strftime('%Y-%m-%d %H:%M %Z')
        = "(JD#{entry.event_at.yday})"
        .contents
          = render :partial => entry.category, :locals => { :feed => feed, :entry => entry }
    - else
      = link_to slug_entry_path(feed, entry) do
        = entry.event_at.strftime('%Y-%m-%d %H:%M %Z')
        = "(JD#{entry.event_at.yday})"    
        .contents
          = render :partial => entry.category, :locals => { :feed => feed, :entry => entry }
  .ago
    Processed
    = time_ago_in_words(entry.event_at)
    ago
  .sizes.btn-group
    = link_to 'Medium', entry.image_jpg.try(:thumb, '1024x768').try(:url), class: 'btn btn-large', 'data-skip-pjax' => true
    = link_to 'Large', entry.image_jpg.try(:thumb, '1600x1200').try(:url), class: 'btn btn-large', 'data-skip-pjax' => true
    = link_to 'Original', entry.image.try(:url), class: 'btn btn-large', 'data-skip-pjax' => true      

